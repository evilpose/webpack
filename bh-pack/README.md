## bh-pack 是 手写wepack的项目

### main.ejs模板内有webpack内置的解析构建完模块的方法。

1. Compiler 目前主要处理config来的配置内容，并根据配置内容的对源码进行处理，再按照 main.ejs 的模板打包输出出来。
2. Compiler 内处理入口文件和出口文件，保存了plugins的数组，使用了tapable 来对源码处理的每个生命周期加上钩子，然后循环给每个plugins传入不同生命周期的钩子，plugins在合适的生命周期内去触发。
3. 在build开始运行之后，执行构建模块，现根据入口拿到入口源码，拿到了源码之后根据，根据module的rules对代码进行loader的处理，并把每次处理之后的代码传递下去，拿到loader处理的源码再取到模块名字，如果是入口代码，再保留入口文件名。
4. 再对loader处理后的源码进行解析，先进行AST解析语法树，使用 traverse 来遍历 babylon 生成的语法树，解析出来此源码依赖的模块路径，再用generator把语法树解析回代码，并返回代码和此代码所依赖模块的路径。
5. 首先肯定是处理的入口文件，在处理入口文件的时候就能找到相关的代码依赖，然后再循环依赖，对模块不断的进行构建，最后生成一个路径对应代码模块的对象。
6. 当所有的模块构建完成之后，根据main.ejs的模板，把文件发射出去，就是输出到输出路径内。
